!function(t){"use strict";t(["require"],function(t){var e=function(t){this.__c3po__=!0,this.original=t;var e;if(t&&"<"!==t[0]&&(e=t.substring(0,50).indexOf("::"))>-1){var i=n.parseProtocol(t.substring(0,e));this.protocol=i.protocol,this.method=i.method,this.args=i.args,this.pointer=t.substring(e+2),this.interpolable=n.interpolator?n.interpolator.isInterpolable(this.pointer):!1}};e.prototype={exec:function(t,e){if(!this.protocol)return this.original;t=t||t;var i=n.getInitialisedProtocol(this.protocol),o=this.interpolable&&n.interpolator&&e?n.interpolator.interpolate(this.pointer,e):this.pointer,r=this.method;return i&&"function"==typeof i.then?i.then(function(e){return e[r](o,t)}):i[r](o,t)}};var n={Request:e,requestCache:{},protocols:{dummy:{get:function(t){return{dummy:t}}}},fromContext:null,interpolator:null,getProtocol:function(t){var e=null;if(n.fromContext&&(e=n.fromContext(t)),e||(e=n.protocols[t]),!e)throw new Error("no protocol found with : ",t);return e},getInitialisedProtocol:function(t){var e="string"==typeof t?n.getProtocol(t):t;if(e._deep_flattener_&&!e._deep_flattened_)return(e._deep_flattening_?e._deep_flattening_:e.flatten()).then(function(){return n.getInitialisedProtocol(e)});if(e._deep_ocm_&&(e=e()),e.init&&!e.initialised){var i;if(i=e.initialising?e.initialising:e.init(),i&&"function"==typeof i.then)return e.initialising=i,i.then(function(){return e.initialising=null,e.initialised=!0,e});e.initialised=!0}return e},parseProtocol:function(t){var e={method:"get"},n=t.indexOf("(");if(n>-1){var i=t.substring(n+1,t.length-1);t=t.substring(0,n),i&&(e.args=i.split(",").map(function(t){return t.trim()}))}var o=t.split(".");return 2==o.length&&(t=o[0],e.method=o[1]),e.protocol=t,e},get:function(t,e,i){return t.__c3po__||(n.requestCache&&n.requestCache[t]?t=n.requestCache[t]:(t=new n.Request(t),n.requestCache&&(n.requestCache[t.original]=t))),t.exec(e,i)},getAll:function(t,e,i){return t.map(function(t){return n.get(t,e,i)})}};return n})}("undefined"!=typeof define?define:function(t,e){"undefined"!=typeof module?module.exports=e(require):"undefined"!=typeof window?window.c3po=e(null):console.warn("c3po has not been mounted somewhere.")});