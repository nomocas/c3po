!function(t){"use strict";t("c3po",[],function(){var t=/^([\w-]+)(?:\.([\w-]+)(?:\(([^\)]*)\))?)?::([^$]*)/,e=function(e){this.__c3po__=!0,this.original=e;if("<"!==e[0]){var o=t.exec(e);o&&(this.protocol=o[1],this.method=o[2]||"get",this.args=o[3]?o[3].split(",").map(function(t){return t.trim()}):null,this.pointer=o[4],this.interpolable=i.interpolator?i.interpolator.isInterpolable(this.pointer):!1)}};e.prototype={exec:function(t,e){if(!this.protocol)return this.original;t=t||t;var o=i.protocol(this.protocol),n=this.interpolable&&i.interpolator&&e?i.interpolator.interpolate(this.pointer,e):this.pointer,r=this,l=this.args?[].concat(this.args,n,t):[n,t];if(o&&"function"==typeof o.then)return o.then(function(t){if(!t[r.method])throw new Error("there is no method named "+r.method+" in protocol "+r.protocol+"!");return t[r.method].apply(t,l)});if(!o[this.method])throw new Error("there is no method named "+r.method+" in protocol "+r.protocol+"!");return o[this.method].apply(o,l)}};var i={Request:e,requestCache:{},protocols:{dummy:{get:function(t){return{dummy:t}}}},fromGlocal:null,interpolator:null,protocol:function(t){var e=null;if("string"==typeof t){if(this.fromGlocal&&(e=this.fromGlocal(t)),e||(e=this.protocols[t]),!e)throw new Error("no protocol found with : ",t)}else e=t;if(e._deep_flattener_&&!e._deep_flattened_)return(e._deep_flattening_?e._deep_flattening_:e.flatten()).then(function(){return i.protocol(e)});if(e._deep_ocm_&&(e=e()),e.init&&!e.initialised){var o;if(o=e.initialising?e.initialising:e.init(),o&&"function"==typeof o.then)return e.initialising=o,o.then(function(){return e.initialising=null,e.initialised=!0,e});e.initialised=!0}return e},get:function(t,e,i){return t.__c3po__||(this.requestCache&&this.requestCache[t]?t=this.requestCache[t]:(t=new this.Request(t),this.requestCache&&(this.requestCache[t.original]=t))),t.exec(e,i)},getAll:function(t,e,o){return t.map(function(t){return i.get(t,e,o)})}};return i})}("undefined"!=typeof define?define:function(t,e,i){"undefined"!=typeof module?module.exports=i():"undefined"!=typeof window?window[t]=i():console.warn('"%s" has not been mounted somewhere.',t)});